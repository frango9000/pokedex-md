<ng-container *transloco="let t">
  <div
    class="table-container mat-elevation-z2"
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="50"
    (scrolled)="dataSource.nextPage()"
    [scrollWindow]="false"
  >
    <table
      mat-table
      [dataSource]="dataSource"
      [fixedLayout]="true"
      matSort
      matSortActive="id"
      matSortDirection="asc"
      (matSortChange)="dataSource.sort = $event"
    >
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>No.</th>
        <td mat-cell *matCellDef="let pokemon">{{ pokemon.id }}</td>
      </ng-container>

      <ng-container matColumnDef="sprite">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let pokemon">
          <img
            ngSrc="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/{{ pokemon.id }}.png"
            alt="{{ pokemon.name }}"
            width="40"
            height="40"
          />
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let pokemon">{{ t('POKEMON.' + pokemon.name + '.NAME') }}</td>
      </ng-container>

      <ng-container matColumnDef="generation">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Gen.</th>
        <td mat-cell *matCellDef="let pokemon">{{ t('GENERATION.' + pokemon.generation + '.NAME') }}</td>
      </ng-container>

      <ng-container matColumnDef="types">
        <th mat-header-cell *matHeaderCellDef>Types</th>
        <td mat-cell *matCellDef="let pokemon">
          <pokedex-type-button [types]="pokemon.types"></pokedex-type-button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</ng-container>
